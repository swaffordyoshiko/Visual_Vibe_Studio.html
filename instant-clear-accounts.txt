// INSTANT ACCOUNT CLEAR - Copy and paste this into console (F12 ‚Üí Console)
console.log('üö® INSTANT ACCOUNT CLEAR: Fixing signup duplicate error...');

// CLEAR ALL USER DATA immediately
localStorage.removeItem('visualVibeUsers');
localStorage.removeItem('visualVibeUser');
localStorage.removeItem('currentUser');
localStorage.removeItem('vvs_user');
window.currentUser = null;

console.log('‚úÖ All user accounts cleared from storage');

// CREATE FRESH SIGNUP FUNCTION
window.handleSignUp = function(e) {
    if (e) e.preventDefault();
    console.log('üìù Fresh signup processing...');
    
    const nameInput = document.getElementById('signUpName');
    const emailInput = document.getElementById('signUpEmail');
    const passwordInput = document.getElementById('signUpPassword');
    const confirmPasswordInput = document.getElementById('signUpConfirmPassword');
    
    if (!nameInput || !emailInput || !passwordInput || !confirmPasswordInput) {
        alert('Form not found. Please refresh page.');
        return;
    }
    
    const name = nameInput.value.trim();
    const email = emailInput.value.trim().toLowerCase();
    const password = passwordInput.value.trim();
    const confirmPassword = confirmPasswordInput.value.trim();
    
    if (!name || !email || !password || !confirmPassword) {
        alert('Please fill in all fields.');
        return;
    }
    
    if (password !== confirmPassword) {
        alert('Passwords do not match.');
        return;
    }
    
    // FORCE CREATE USER (no duplicate check since we cleared everything)
    const newUser = {
        id: 'fresh_' + Date.now(),
        name: name,
        email: email,
        password: password,
        createdAt: new Date().toISOString()
    };
    
    // Save as first user in fresh array
    localStorage.setItem('visualVibeUsers', JSON.stringify([newUser]));
    
    // Create session
    window.currentUser = {
        id: newUser.id,
        name: newUser.name,
        email: newUser.email,
        loginTime: new Date().toISOString()
    };
    
    localStorage.setItem('visualVibeUser', JSON.stringify(window.currentUser));
    localStorage.setItem('currentUser', JSON.stringify(window.currentUser));
    
    // Close modal
    const modal = document.getElementById('signUpModal');
    if (modal) {
        modal.classList.add('hidden');
        modal.style.display = 'none';
    }
    
    // Clear form
    nameInput.value = '';
    emailInput.value = '';
    passwordInput.value = '';
    confirmPasswordInput.value = '';
    
    // Show signed-in UI
    const signedInState = document.getElementById('signedInState');
    const mobileSignedInState = document.getElementById('mobileSignedInState');
    
    if (signedInState) {
        signedInState.classList.remove('hidden');
        signedInState.style.display = 'flex';
        signedInState.style.visibility = 'visible';
    }
    
    if (mobileSignedInState) {
        mobileSignedInState.classList.remove('hidden');
        mobileSignedInState.style.display = 'block';
        mobileSignedInState.style.visibility = 'visible';
    }
    
    alert(`‚úÖ Welcome ${name}! Account created successfully.`);
    console.log('‚úÖ Fresh signup completed successfully');
};

// ATTACH TO FORM
const signUpForm = document.getElementById('signUpForm');
if (signUpForm) {
    const newForm = signUpForm.cloneNode(true);
    signUpForm.parentNode.replaceChild(newForm, signUpForm);
    newForm.onsubmit = window.handleSignUp;
    newForm.addEventListener('submit', window.handleSignUp);
    console.log('‚úÖ Fresh signup handler attached');
}

console.log('üéâ INSTANT FIX COMPLETE!');
console.log('‚úÖ All accounts cleared - signup should now work');
console.log('üß™ Try signing up with any email address now');
