<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clean Auth Test - Visual Vibe Studio</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-50 font-sans">
  <!-- Header with Auth Buttons -->
  <header class="bg-white shadow-sm border-b">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center py-4">
        <div class="flex items-center">
          <h1 class="text-2xl font-bold text-gray-900">Visual Vibe Studio</h1>
        </div>

        <!-- Desktop Auth Navigation -->
        <nav class="hidden md:flex items-center space-x-4">
          <!-- Signed Out State -->
          <div id="signedOutState" class="flex items-center space-x-2">
            <button onclick="openSignInModal()" class="bg-indigo-600 text-white px-3 py-2 rounded-lg hover:bg-indigo-700 transition-colors text-sm font-medium">
              Sign In
            </button>
            <button onclick="openSignUpModal()" class="border border-indigo-600 text-indigo-600 px-3 py-2 rounded-lg hover:bg-indigo-50 transition-colors text-sm font-medium">
              Sign Up
            </button>
          </div>

          <!-- Signed In State -->
          <div id="signedInState" class="flex items-center space-x-2" style="display: none;">
            <span class="text-gray-700">Welcome, <span id="userName" class="font-semibold">User</span>!</span>
            <button onclick="openProfileModal()" class="text-indigo-600 hover:text-indigo-800 px-2 py-1 rounded transition-colors text-sm font-medium">
              Edit Profile
            </button>
            <button onclick="showOrderHistory()" class="text-indigo-600 hover:text-indigo-800 px-2 py-1 rounded transition-colors text-sm font-medium">
              My Orders
            </button>
            <button onclick="signOut()" class="bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700 transition-colors text-sm font-medium">
              Sign Out
            </button>
          </div>
        </nav>

        <!-- Mobile Menu Button -->
        <div class="md:hidden">
          <button id="mobileMenuBtn" onclick="toggleMobileMenu()" class="text-gray-500 hover:text-gray-700">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Mobile Menu -->
      <div id="mobileMenu" class="md:hidden pb-4 border-t border-gray-200 mt-4 pt-4" style="display: none;">
        <!-- Mobile Signed Out State -->
        <div id="mobileSignedOutState" class="space-y-3">
          <button onclick="openSignInModal(); closeMobileMenu();" class="w-full bg-indigo-600 text-white px-4 py-3 rounded-lg hover:bg-indigo-700 transition-colors text-sm font-medium">
            Sign In
          </button>
          <button onclick="openSignUpModal(); closeMobileMenu();" class="w-full border border-indigo-600 text-indigo-600 px-4 py-3 rounded-lg hover:bg-indigo-50 transition-colors text-sm font-medium">
            Sign Up
          </button>
        </div>

        <!-- Mobile Signed In State -->
        <div id="mobileSignedInState" class="space-y-3" style="display: none;">
          <div class="text-gray-700 text-center font-semibold">Welcome, <span id="mobileUserName">User</span>!</div>
          <button onclick="openProfileModal(); closeMobileMenu();" class="w-full text-indigo-600 border border-indigo-600 px-4 py-3 rounded-lg hover:bg-indigo-50 transition-colors text-sm font-medium">
            Edit Profile
          </button>
          <button onclick="showOrderHistory(); closeMobileMenu();" class="w-full text-indigo-600 border border-indigo-600 px-4 py-3 rounded-lg hover:bg-indigo-50 transition-colors text-sm font-medium">
            My Orders
          </button>
          <button onclick="signOut(); closeMobileMenu();" class="w-full bg-red-600 text-white px-4 py-3 rounded-lg hover:bg-red-700 transition-colors text-sm font-medium">
            Sign Out
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="text-center">
      <h2 class="text-3xl font-bold text-gray-900 mb-4">Clean Auth Test Page</h2>
      <p class="text-lg text-gray-600 mb-8">Testing sign in/sign up functionality without script conflicts</p>
      
      <!-- Test Status -->
      <div id="testStatus" class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-8">
        <h3 class="text-lg font-semibold text-blue-800 mb-2">Authentication Status</h3>
        <p id="authStatus" class="text-blue-700">Not signed in</p>
      </div>

      <!-- Test Buttons -->
      <div class="space-x-4 mb-8">
        <button onclick="openSignInModal()" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 font-medium">
          Test Sign In
        </button>
        <button onclick="openSignUpModal()" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 font-medium">
          Test Sign Up
        </button>
        <button onclick="checkAuthState()" class="bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 font-medium">
          Check Auth State
        </button>
      </div>

      <!-- Instructions -->
      <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
        <h3 class="text-lg font-semibold text-yellow-800 mb-2">Test Instructions</h3>
        <div class="text-yellow-700 text-left max-w-2xl mx-auto">
          <ol class="list-decimal list-inside space-y-1">
            <li>Click "Test Sign Up" to create a new account</li>
            <li>After signing up, you should see "Edit Profile", "My Orders", and "Sign Out" buttons</li>
            <li>Click "Sign Out" to test the sign out flow</li>
            <li>Click "Test Sign In" to sign back in with your account</li>
            <li>The header should update to show the signed-in state</li>
          </ol>
        </div>
      </div>
    </div>
  </main>

  <!-- Essential Scripts Only -->
  <script>
    // Mobile menu toggle
    function toggleMobileMenu() {
      const menu = document.getElementById('mobileMenu');
      menu.style.display = menu.style.display === 'none' ? 'block' : 'none';
    }

    function closeMobileMenu() {
      document.getElementById('mobileMenu').style.display = 'none';
    }

    // Placeholder functions for testing
    function openProfileModal() {
      alert('Edit Profile modal would open here (placeholder)');
    }

    function showOrderHistory() {
      alert('My Orders modal would open here (placeholder)');
    }

    // Auth state checker
    function checkAuthState() {
      const status = document.getElementById('authStatus');
      if (window.currentUser) {
        status.textContent = `Signed in as: ${window.currentUser.name} (${window.currentUser.email})`;
        status.className = 'text-green-700';
      } else {
        status.textContent = 'Not signed in';
        status.className = 'text-blue-700';
      }
    }

    // Update auth status every 2 seconds
    setInterval(checkAuthState, 2000);
  </script>

  <!-- ONLY LOAD THE CLEAN AUTH MANAGER -->
  <script src="clean-auth-manager.js"></script>
</body>
</html>
